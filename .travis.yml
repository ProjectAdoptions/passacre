language: python
env:
  global:
    - secure: "SJjsuWq8dCt8A8d+Gn8WS+nB5uBZ4HWbpyY4sQ3Hz11KyFGU0PsGTq+kiVsYnvKYzgrdCAMVNUn0dh3kMqcFZ0beXbzYV3BdJvYjD1TfYVm3v+lIlWdrW5cHqeuvL697xWKjwOEaxg+wFDtyf/emfhrTVQAAnZ1EEaKfwLxGauY="

addons:
  coverity_scan:
    project:
      name: "habnabit/passacre"
      description: "Build submitted via Travis CI"
    notification_email: "coverity@habnab.it"
    build_command: "python setup.py build_ext"
    branch_pattern: coverity-scan


matrix:
  include:

    - python: 2.6
      env: TOXENV=py26,coveralls _COMPILER=clang

    - python: 2.7
      env: TOXENV=py27,coveralls _COMPILER=clang

    - python: 3.2
      env: TOXENV=py32,coveralls _COMPILER=clang

    - python: 3.3
      env: TOXENV=py33,coveralls _COMPILER=clang

    - python: 3.4
      env: TOXENV=py34,coveralls _COMPILER=clang

    - python: 2.6
      env: TOXENV=py26,coveralls _COMPILER=gcc

    - python: 2.7
      env: TOXENV=py27,coveralls _COMPILER=gcc

    - python: 3.2
      env: TOXENV=py32,coveralls _COMPILER=gcc

    - python: 3.3
      env: TOXENV=py33,coveralls _COMPILER=gcc

    - python: 3.4
      env: TOXENV=py34,coveralls _COMPILER=gcc

    - python: 2.7
      env: TOXENV=gcovr,cpp-coveralls _COMPILER=clang


before_install:
  - "sudo add-apt-repository --yes ppa:kalakris/cmake"
  - "sudo apt-get update"
  - "sudo apt-get install cmake"
  - "source .travis/setup.sh"
install:
  - "pip install tox"
script:
  - "tox -- -rs"
